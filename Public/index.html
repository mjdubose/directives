
<!DOCTYPE html>
<html>
<head>
	<link href='/public/stylesheet.css' rel='stylesheet'>
	<link href='/public/style.css' rel='stylesheet'>
</head>
<body ng-app="D3App" class='body'>
<Video class='background' autoplay loop>
	<source src="/public/videos/malthael.webm" type="video/webm" />
	<source src="/public/videos/malthael.mp4" type="video/mp4" />
</video>

<div class='container' ng-controller="SearchBar"> 
	<div class='search-bar-and-heros'>
		<div class='search-bar-inputs'>
			<input type='text' ng-model='battleTag' />
			<input type='button' value='"I need a hero"- Bonnie Tyler' ng-click='getHeroInformation(battleTag)'/>
		</div>
		<div ng-repeat='hero in heroList' ng-click='displayHeroInformation(hero)'>
			<div class='hero' ng-model='hero' >
				{{hero.name}} -	 Lvl: {{hero.level}} , {{hero.class}}
			</div>
		</div>
	</div>

<div class='hero-equipment' ng-controller='Displayer' ng-click='showData()'>
	Hero's Equipment {{myHero}}
</div>

</div>

<!--  <script>
	const function run(interval, frames) {
		var int = 1;
		function func(){
			document.body.class = 'b'+int
			int++
			if (int === frames) {int = 1;}
		}
		console.log(int)
		var swap = window.setInterval(func, interval);
	}
	run (1000,10);
<video xmlns="http://www.w3.org/1999/xhtml" id="malthael-video" class="video-bg is-active" loop="loop" poster="/public/images/malthael.jpg">
</script> -->

<!-- <audio controls className='audio' autoplay>
	{"<source src='/Public/03-new-tristram.mp3' type='audio/mp3'>"}
</audio> -->

<script src='https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.5.8/angular.js'></script>
<script>var app = angular.module('D3App', []);
app.controller('SearchBar', function($scope, $http, heroService){
	$scope.heroList;
	$scope.battleTag = 'slayeneq-1864';

	$scope.getHeroInformation = function (tag){

		$http.get('/profile?id=' + tag).then(function(response){
			$scope.heroList = response.data;
		})
	}
	$scope.displayHeroInformation = function (hero){
		console.log(hero)
		heroService._addBattleTag(hero.battleTag);
		heroService._addCharacterId(hero.characterID);
	}


	})
	app.controller('Displayer', function($scope, $http, heroService) {
				$scope.heroService = heroService._currentHeroData
				if(heroService._currentHeroData.battleTag !== undefined) {
					myHero = heroService._currentHeroData
				}
				$scope.showData = function(){console.log(heroService._currentHeroData)}
				$scope.myHero = ''

	})

	app.service('heroService', function(){
		var currentHero={}
		_addBattleTag = function(battleTag){
			currentHero.battleTag = battleTag;
		}
		_addCharacterId = function(charaID){
			currentHero.characterID = charaID;
		}
		_currentHeroData = function(){
			return currentHero;
		}
		return {_addCharacterId :_addCharacterId,
						_addBattleTag: _addBattleTag,
						_currentHeroData:_currentHeroData()};
	})
	 </script>

<!-- script will download and display the tooltip parameters on any link pointing to a diablo 3 item skill or skill calculator 
//                                
//http://media.blizzard.com/d3/icons/items/large/unique_gloves_set_02_p2_demonhunter_male.png 
// icons are available for skills or items (items take large or small sizes, skills have pixel size allotments 21, 42 or 64);
//.png name is stored in items or skills database table under icon.
-->
<script src="http://us.battle.net/d3/static/js/tooltips.js"></script>
</body>
</html>
